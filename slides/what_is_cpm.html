<!DOCTYPE html>
<html lang="en">
  <head>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1"></script>
    <style>
      .slide-container {
        width: 1280px;
        min-height: 720px;
        background: #FFFFFF;
        color: #252525;
        font-family: 'Segoe UI', sans-serif;
        padding: 40px;
      }
      .title {
        font-size: 36px;
        font-weight: bold;
        color: #0078D4;
        margin-bottom: 30px;
      }
      .content {
        display: flex;
        justify-content: space-between;
      }
      .text-section {
        width: 48%;
      }
      .visual-section {
        width: 48%;
      }
      .subtitle {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 15px;
        color: #0078D4;
      }
      .text {
        font-size: 20px;
        line-height: 1.5;
        margin-bottom: 20px;
      }
      .highlight {
        color: #107C10;
        font-weight: bold;
      }
      .diagram-container {
        height: 450px;
        display: flex;
        justify-content: center;
        align-items: center;
      }
    </style>
  </head>
  <body>
    <div class="slide-container">
      <div class="title">What is Central Package Management?</div>
      
      <div class="content">
        <div class="text-section">
          <div class="subtitle">Definition</div>
          <p class="text">
            <span class="highlight">Central Package Management (CPM)</span> is a NuGet feature that allows you to manage package versions for all projects in a solution from a single, central location.
          </p>
          
          <div class="subtitle mt-6">Key Concepts</div>
          <ul class="text list-disc pl-6">
            <li>Introduced in NuGet 6.2 (April 2022)</li>
            <li>Uses a <code>Directory.Packages.props</code> file at the solution root</li>
            <li>Projects reference packages without specifying versions</li>
            <li>Versions are defined once and applied consistently</li>
            <li>Compatible with all <code>PackageReference</code>-based projects</li>
          </ul>
          
          <div class="subtitle mt-6">Requirements</div>
          <ul class="text list-disc pl-6">
            <li>NuGet 6.2 or newer</li>
            <li>.NET SDK 6.0.300 or newer</li>
            <li>Visual Studio 2022 17.2 or newer (if using VS)</li>
          </ul>
        </div>
        
        <div class="visual-section">
          <div class="diagram-container" id="cpm-diagram"></div>
        </div>
      </div>
    </div>
    
    <script>
      // D3.js diagram showing the central package management concept
      const svg = d3.select("#cpm-diagram")
        .append("svg")
        .attr("width", 500)
        .attr("height", 450);
      
      // Define the central file
      svg.append("rect")
        .attr("x", 150)
        .attr("y", 50)
        .attr("width", 200)
        .attr("height", 80)
        .attr("rx", 5)
        .attr("ry", 5)
        .attr("fill", "#0078D4")
        .attr("stroke", "#004E8C")
        .attr("stroke-width", 2);
      
      svg.append("text")
        .attr("x", 250)
        .attr("y", 85)
        .attr("text-anchor", "middle")
        .attr("fill", "white")
        .attr("font-size", "16px")
        .attr("font-weight", "bold")
        .text("Directory.Packages.props");
      
      svg.append("text")
        .attr("x", 250)
        .attr("y", 105)
        .attr("text-anchor", "middle")
        .attr("fill", "white")
        .attr("font-size", "12px")
        .text("Central Version Definitions");
      
      // Define the projects
      const projects = [
        { name: "Core Project", x: 50, y: 250 },
        { name: "Infrastructure", x: 200, y: 250 },
        { name: "API Project", x: 350, y: 250 },
        { name: "Test Project", x: 500, y: 250 }
      ];
      
      // Draw projects
      projects.forEach(project => {
        svg.append("rect")
          .attr("x", project.x - 70)
          .attr("y", project.y - 30)
          .attr("width", 140)
          .attr("height", 60)
          .attr("rx", 5)
          .attr("ry", 5)
          .attr("fill", "#107C10")
          .attr("stroke", "#004E8C")
          .attr("stroke-width", 1);
        
        svg.append("text")
          .attr("x", project.x)
          .attr("y", project.y)
          .attr("text-anchor", "middle")
          .attr("fill", "white")
          .attr("font-size", "14px")
          .attr("font-weight", "bold")
          .text(project.name);
        
        svg.append("text")
          .attr("x", project.x)
          .attr("y", project.y + 20)
          .attr("text-anchor", "middle")
          .attr("fill", "white")
          .attr("font-size", "12px")
          .text("<PackageReference />");
        
        // Draw arrows from central file to projects
        svg.append("line")
          .attr("x1", 250)
          .attr("y1", 130)
          .attr("x2", project.x)
          .attr("y2", project.y - 30)
          .attr("stroke", "#0078D4")
          .attr("stroke-width", 2)
          .attr("marker-end", "url(#arrow)");
      });
      
      // Define arrow marker
      svg.append("defs").append("marker")
        .attr("id", "arrow")
        .attr("viewBox", "0 -5 10 10")
        .attr("refX", 8)
        .attr("refY", 0)
        .attr("markerWidth", 6)
        .attr("markerHeight", 6)
        .attr("orient", "auto")
        .append("path")
        .attr("d", "M0,-5L10,0L0,5")
        .attr("fill", "#0078D4");
      
      // Add title
      svg.append("text")
        .attr("x", 250)
        .attr("y", 350)
        .attr("text-anchor", "middle")
        .attr("fill", "#252525")
        .attr("font-size", "18px")
        .attr("font-weight", "bold")
        .text("Central Package Management Flow");
      
      // Add description
      svg.append("text")
        .attr("x", 250)
        .attr("y", 380)
        .attr("text-anchor", "middle")
        .attr("fill", "#252525")
        .attr("font-size", "14px")
        .text("Versions defined once, referenced everywhere");
    </script>
  </body>
</html>
